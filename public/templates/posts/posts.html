<div>
    <div class="panel panel-default">
        <ul class="nav nav-list">
            <li ng-class="{ active: $state.includes('posts') }">
                <h4>All Posts</h4>
            </li>
            <li ng-if="user.isLoggedIn">
                <button class="btn btn-info" ng-click="trigger()">Create a Post</button>
                <div class="panel" ng-if="create.form">
                    <form name="PostForm" ng-submit="PostForm.$valid && post()">
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-header"></i></span>
                                        <input type="text" name="title" id="title" ng-model="post.title" placeholder="Title" class="form-control" autocomplete="off" required>                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <div class="form-group">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-at"></i></span>
                                        <input type="url" ng-model="post.url" class="form-control" placeholder="URL" autocomplete="off" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input class="btn btn-info" type="submit" value="Create"> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </li>
            <li class="nav-header">Top Posts</li>
            <li class="list-group-item" ng-repeat="post in filteredPosts">
                
                <div class="row-fluid">
                    
                        {{($index + 1) + position}}.
                    
                        <a href="#" ng-click="voteUp(post)"> <i class="fa fa-angle-up"></i></a>
                        <small>{{post.votes}}votes</small>
                        <a href="#" ng-click="voteDown(post)"> <i class="fa fa-angle-down"></i></a>
                        <div class="row-fluid">
                            
                            <a href={{post.url}}>{{post.title}}</a>
                          
                            
                        </div>
                         
                        <em>{{ post.created_at | timeAgo}}</em> 
                        by <cite>{{post.author.username}}</cite> <br />
                        <a href ng-click="select(post)">
                            <span class="fa-stack fa-2x">
    <i class="fa fa-comment fa-stack-2x"></i>
    <strong class="fa-stack-1x fa-stack-text fa-inverse">{{post.comments.length}}</strong>
  </span>
                        </a>
                               
                             <div class="panel" ng-show="isSelected(post)">
                                 
                                 <ul class="nav nav-list" ng-repeat="comment in post.comments">
                                     <li class="list-group-item">
                                         <strong><cite>{{comment.author.username}}</cite></strong> 
                                         {{comment.updated_at | timeAgo }}
                                         <p>{{comment.message}}</p>
                                     </li>
                                 </ul>
                                 
                                 <form class="form" role="form" ng-if="user.isLoggedIn">
                                        <label for="exampleInputEmail1">Add a Comment</label>
                                        <textarea class="form-control" id="exampleInputEmail1" rows="3"></textarea>
                                     <button type="submit" class="btn btn-default">Submit</button>
                                     
                                 </form>
                                 
                             </div>
                </div>       
                    
                
            </li>
            <pagination total-items="totalItems" items-per-page="itemsPerPage" 
                        ng-model="currentPage" ng-change="pageChanged()"></pagination>
        </ul>
        <hr>
    </div>
</div>


